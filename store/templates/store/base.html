<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}Kenzhe Gold{% endblock %}</title>
  {% load static %}
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Fonts and Styles -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600&family=Playfair+Display&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'store/css/base.css' %}">
  <script src="{% static 'store/js/animations.js' %}"></script>
  <script src="{% static 'store/js/cart-ajax.js' %}"></script>

  {% block extra_css %}{% endblock %}
</head>
<body>

<!-- Навбар -->
<nav class="navbar navbar-expand-lg position-relative">
  <div class="container d-flex justify-content-center align-items-center">
    <ul class="navbar-nav flex-row gap-4 me-5 d-none d-lg-flex">
      <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">Главная</a></li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="typeDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Каталог</a>
        <ul class="dropdown-menu" aria-labelledby="typeDropdown">
          {% for t in types %}
          <li><a class="dropdown-item" href="{% url 'products_by_type' t.id %}">{{ t.name }}</a></li>
          {% endfor %}
        </ul>
      </li>
      <li class="nav-item"><a class="nav-link" href="{% url 'cart' %}">Корзина</a></li>
    </ul>

    <a class="navbar-brand mx-4" href="{% url 'home' %}">
      <img src="{% static 'store/images/logo.jpg' %}" alt="KENZHE.GOLD" style="height: 90px;">
    </a>

    <ul class="navbar-nav flex-row gap-4 ms-5 d-none d-lg-flex">
      {% if user.is_authenticated %}
      <li class="nav-item"><a class="nav-link" href="{% url 'checkout' %}">Оформление</a></li>
      <li class="nav-item"><a class="nav-link disabled">{{ user.username }}</a></li>
      <li class="nav-item"><a class="nav-link" href="{% url 'logout' %}">Выйти</a></li>
      {% else %}
      <li class="nav-item"><a class="nav-link" href="{% url 'checkout' %}">Оформление</a></li>
      <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">Войти</a></li>
      <li class="nav-item"><a class="nav-link" href="{% url 'register' %}">Регистрация</a></li>
      {% endif %}
    </ul>
  </div>

  <!-- Бургер только для мобилки -->
  <button class="navbar-toggler d-lg-none" type="button" id="burgerBtn">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="mobile-menu d-lg-none" id="mobileMenu">
    <button class="close-btn" id="closeMobileMenu">&times;</button>
    <ul class="navbar-nav text-center">
      <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">Главная</a></li>
      <li class="nav-item"><a class="nav-link" href="{% url 'cart' %}">Корзина</a></li>
      <li class="nav-item"><a class="nav-link" href="{% url 'checkout' %}">Оформление</a></li>
       <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="typeDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Каталог</a>
        <ul class="dropdown-menu" aria-labelledby="typeDropdown">
          {% for t in types %}
          <li><a class="dropdown-item" href="{% url 'products_by_type' t.id %}">{{ t.name }}</a></li>
          {% endfor %}
        </ul>
      </li>
      {% if user.is_authenticated %}
      <li class="nav-item"><span class="nav-link disabled">{{ user.username }}</span></li>
      <li class="nav-item"><a class="nav-link" href="{% url 'logout' %}">Выйти</a></li>
      {% else %}
      <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">Войти</a></li>
      <li class="nav-item"><a class="nav-link" href="{% url 'register' %}">Регистрация</a></li>
      {% endif %}
    </ul>
  </div>
</nav>



<!-- Контент страницы -->
{% block content %}{% endblock %}

<!-- Подвал -->
<footer class="text-center bg-black text-light py-4">
  &copy; 2025 KENZHE.GOLD — Все права защищены.
</footer>

{% block extra_js %}{% endblock %}
<script>
  const burgerBtn = document.getElementById('burgerBtn');
  const mobileMenu = document.getElementById('mobileMenu');
  const closeBtn = document.getElementById('closeMobileMenu');

  burgerBtn.addEventListener('click', () => {
    mobileMenu.classList.add('active');
  });

  closeBtn.addEventListener('click', () => {
    mobileMenu.classList.remove('active');
  });
</script>

</body>
</html>
